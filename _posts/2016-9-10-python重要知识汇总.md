---
layout: post
title: python重要知识汇总
date: 2016-9-10
categories: blog
tags: [python]
description: 函数积累
---

## 字符编码

字符编码是计算机的基础，同时中文编码也是编程中最棘手的问题之一，所以了解字符编码非常重要。

- [字符编码笔记：ASCII，Unicode和UTF-8](http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html)

- [字符编码](https://github.com/qiwsir/StarterLearningPython/blob/master/110.md)


## 生成器：yield

`yield`的功能类似于`return`，但是不同之处在于它返回的是**生成器**，在高级一点的编程中经常用到，以下为关于生成器的参考资料。

- [Python yield与实现](http://www.cnblogs.com/coder2012/p/4990834.html)

- [Python - Generator Functions and Expressions ](http://www.bogotobogo.com/python/python_generators.php)

- [PEP 342 -- Coroutines via Enhanced Generators](httPEP 342 -- Coroutines via Enhanced Generatorsps://www.python.org/dev/peps/pep-0342/)

- [http://blog.csdn.net/pfm685757/article/details/49924099](Python生成器generator之next和send运行流程 )

**生成器**

生成器是通过一个或多个`yield`表达式构成的函数，每一个生成器都是一个迭代器（但是迭代器不一定是生成器）。

如果一个函数包含`yield`关键字，这个函数就会变为一个生成器。

生成器并不会一次返回所有结果，而是每次遇到`yield`关键字后返回相应结果，并保留函数当前的运行状态，等待下一次的调用。

由于生成器也是一个迭代器，那么它就应该支持`next`方法来获取下一个值。

**基本操作**

```
# 通过`yield`来创建生成器
def func():
   for i in xrange(10);
        yield i

# 通过列表来创建生成器
[i for i in xrange(10)]



# 调用如下
>>> f = func()
>>> f # 此时生成器还没有运行
<generator object func at 0x7fe01a853820>
>>> f.next() # 当i=0时，遇到yield关键字，直接返回
0
>>> f.next() # 继续上一次执行的位置，进入下一层循环
1
...
>>> f.next()
9
>>> f.next() # 当执行完最后一次循环后，结束yield语句，生成StopIteration异常
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration
>>> 

```

除了`next`函数，生成器还支持`send`函数。该函数可以向生成器传递参数。

```
>>> def func():
...     n = 0
...     while 1:
...         n = yield n #可以通过send函数向n赋值
... 
>>> f = func()
>>> f.next() # 默认情况下n为0
0
>>> f.send(1) #n赋值1
1
>>> f.send(2)
2
>>> 


```

# 嵌套字典

实际工作中会遇到需要嵌套很多层的字典，前天在研究决策树的时候遇到构造嵌套字典的问题，`collections`模块有一个`defaultdict`函数非常好用

```
from collections import defaultdict
tree = lambda: defaultdict(tree)
t = tree()
t['a']['b'] = 1
t['c'] = 1
t['d']['e']['f'] = 10

print (t)

defaultdict(<function <lambda> at 0x000001F23FCB78C8>, {'a': defaultdict(<function <lambda> at 0x000001F23FCB78C8>, {'b': 1}), 'c': 1, 'e': defaultdict(<function <lambda> at 0x000001F23FCB78C8>, {'e': defaultdict(<function <lambda> at 0x000001F23FCB78C8>, {'f': 10})})})

```
简直完美，如何灵活运用，还需要自己不断摸索



